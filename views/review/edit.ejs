<!-- head is started here -->
<%- include('../common/_header.ejs') %>
    <title>Revour - edit your review</title>
    <link rel="stylesheet" href="/css/reviewWrite.css">
    <link rel="stylesheet" href="/css/reviewEdit.css">
    <script src="https://cdn.tiny.cloud/1/x6uvlmtjsi6k2x8iyc1lg8nhoczdcubehb1wzkkuzuzde2p2/tinymce/5/tinymce.min.js"
        referrerpolicy="origin"></script>
    <script>tinymce.init({ selector: 'textarea' });</script>
    </head>

    <body>
        <%- include('../common/_navBar.ejs') %>
            <input id="reviewId" type="number" hidden value="<%= review.id %>">
            <div class="container contentBody">
                <form class="w-75 m-auto reviewForm" id="reviewForm" action="#" onsubmit="return publishReview();"
                    method="POST">

                    <div class="location">
                        <span class="warning">* you cannot change the location information</span>
                        <h3 class="title">
                            <%= review.title %>
                        </h3>
                        <p class="category">
                            <%= review.location.category %>
                        </p>
                    </div>
                    <div class="extraInfoDiv">
                        <label for="foodCulture">Food culture</label>
                        <textarea type="text" name="foodCulture" id="foodCulture"><%- review.food_culture %> </textarea>
                    </div>
                    <div class="extraInfoDiv">
                        <label for="residential">Residential facilities</label>
                        <textarea type="text" name="residential"
                            id="residential"><%- review.residence_availability %> </textarea>
                    </div>
                    <div class="extraInfoDiv">
                        <label for="risk">Risk factors</label>
                        <textarea type="text" name="risk" id="risk"><%- review.risk_factors %> </textarea>
                    </div>
                    <label for="details" class="fs-3 fw-bold">Share your experience on that place</label>
                    <textarea class="" name="details" id="details" cols="30"
                        rows="10"><%- review.experience %> </textarea>
                    <div class="extraInfoDiv">
                        <label for="season">Best season to visit</label>
                        <input type="text" name="season" id="season" value="<%= review.best_season %> ">
                    </div>
                    <div id="addImages">
                        <h3>Add some images of that place</h3>
                        <div id="imagesPreview">

                        </div>
                        <input type="file" name="image" id="image">
                        <button class="btn btn-primary" onclick=" return uploadImage(this.form)">Upload</button>
                    </div>
                    <div class="extraInfoDiv">
                        <label for="rating">Rate this place out of 6</label>
                        <select id="rating" class="form-select form-select-lg mb-3" aria-label=".form-select-lg">
                            <option value="null">Select a rating</option>
                            <% for( let i=1; i <=6; i++ ) { %>
                                <% if (i==review.location_rating) { %>
                                    <option value="<%= i %>" selected="selected">
                                        <%= i %>
                                    </option>
                                    <% } else { %>
                                        <option value="<%= i %>">
                                            <%= i %>
                                        </option>

                                        <% } %>
                                            <% } %>
                        </select>
                    </div>
                    <button class="btn btn-primary" type="submit">Publish</button>
                </form>
            </div>

            <%- include('../common/_footer.ejs') %>
                <script src="/js/mapBox.js"></script>
                <script src="/js/reviewEdit.js"></script>
    </body>

    </html>